const questions = [
  {
    question: "Нравится ли тебе мастерить что-то своими руками, например, собирать модели или чинить вещи?",
    options: [
      { text: "Да! Люблю возиться с инструментами и всё чинить", category: "R" },
      { text: "Зависит — интересно, если можно что-то улучшить или оптимизировать", category: "I" },
      { text: "Только если можно украсить или сделать что-то необычное", category: "A" },
      { text: "Мне больше нравится помогать другим, чем мастерить", category: "S" }
    ]
  },
  {
    question: "Любишь ли ты активный отдых и работу на свежем воздухе, например, ухаживать за садом или играть в подвижные игры?",
    options: [
      { text: "Да, обожаю двигаться и быть на природе", category: "R" },
      { text: "Иногда — если это связано с изучением природы или науки", category: "I" },
      { text: "Только если это связано с креативными проектами на улице", category: "A" },
      { text: "Предпочитаю активность, где можно быть с людьми и помогать", category: "S" }
    ]
  },
  {
    question: "Интересно ли тебе разбирать вещи, чтобы понять, как они устроены, например, чинить велосипед или компьютер?",
    options: [
      { text: "Да, люблю выяснять, как всё работает", category: "R" },
      { text: "Очень! Это прям мой стиль — исследовать и понимать механику", category: "I" },
      { text: "Только если могу потом переделать в нечто уникальное", category: "A" },
      { text: "Я бы лучше объяснил кому-то, как оно работает", category: "S" }
    ]
  },
  {
    question: "Предпочитаешь ли ты практическую деятельность, например, работать в мастерской или на стройке, а не сидеть в офисе?",
    options: [
      { text: "Однозначно! Я не создан для офиса", category: "R" },
      { text: "Я бы выбрал лабораторию, где можно экспериментировать", category: "I" },
      { text: "А я — студию, чтобы создавать", category: "A" },
      { text: "Я лучше в офисе, если там можно помогать или учить", category: "S" }
    ]
  },
  {
    question: "Тебе нравится заниматься спортом или физическими упражнениями, чтобы чувствовать силу и ловкость своего тела?",
    options: [
      { text: "Да! Мне важно чувствовать тело и двигаться", category: "R" },
      { text: "Мне интересно, как физические упражнения влияют на организм", category: "I" },
      { text: "Только если это связано с танцами или перформансом", category: "A" },
      { text: "Я бы лучше тренировал других, чем сам занимался", category: "S" }
    ]
  },
  {
    question: "Любишь ли ты строить что-нибудь, например шалаш или конструктор?",
    options: [
      { text: "Обожаю строить и конструировать!", category: "R" },
      { text: "Только если это часть инженерного проекта", category: "I" },
      { text: "Только если это можно оформить творчески", category: "A" },
      { text: "Мне интереснее строить вместе с другими, как командную игру", category: "S" }
    ]
  },
  {
    question: "Любишь ли ты решать головоломки и логические задачки?",
    options: [
      { text: "Иногда — если они оформлены интересно", category: "A" },
      { text: "Очень! Обожаю такие вызовы", category: "I" },
      { text: "Только если это часть соревнования", category: "E" },
      { text: "Мне интереснее общение с людьми, чем задачи", category: "S" }
    ]
  },
  {
    question: "Интересно ли тебе проводить маленькие эксперименты, например, дома смешивать вещества и наблюдать результат?",
    options: [
      { text: "Да, люблю делать мини-лаборатории", category: "I" },
      { text: "Только если из этого получится нечто красивое", category: "A" },
      { text: "Я бы лучше записал результаты и сравнил", category: "C" },
      { text: "Предпочитаю что-то делать вместе с друзьями", category: "S" }
    ]
  },
  {
    question: "Тебя привлекает разбираться в том, как что-то работает, например, изучать устройство компьютера или организма?",
    options: [
      { text: "Да, мне это супер важно — понять суть", category: "I" },
      { text: "Интересно, если можно потом это применить на практике", category: "R" },
      { text: "Мне ближе разбор творческих процессов", category: "A" },
      { text: "Я бы хотел объяснить это другим", category: "S" }
    ]
  },
  {
    question: "Нравится ли тебе анализировать информацию, изучать факты и искать логику в явлениях?",
    options: [
      { text: "Конечно! Анализ — это моё всё", category: "I" },
      { text: "Я предпочитаю интерпретировать в творческой форме", category: "A" },
      { text: "Мне интереснее работать с людьми, а не с фактами", category: "S" },
      { text: "Я бы классифицировал и упорядочил информацию", category: "C" }
    ]
  },
  {
    question: "Любишь ли ты читать о науке и открытиях, узнавать что-то новое?",
    options: [
      { text: "Да, особенно про исследования и технологии", category: "I" },
      { text: "Если это про креативные открытия", category: "A" },
      { text: "Только если связано с психологией или людьми", category: "S" },
      { text: "Мне больше нравятся систематизированные статьи", category: "C" }
    ]
  },
  {
    question: "Представляешь ли ты себя учёным или изобретателем, придумывающим собственные эксперименты?",
    options: [
      { text: "Да, мне хочется создавать открытия", category: "I" },
      { text: "Только если это будут креативные изобретения", category: "A" },
      { text: "Я бы хотел изобретать, чтобы помогать обществу", category: "S" },
      { text: "Мне важно, чтобы это было чётко организовано", category: "C" }
    ]
  },
  {
    question: "Тебе нравится творчески выражать свои мысли — рисовать, петь, танцевать?",
    options: [
      { text: "Да, я живу этим!", category: "A" },
      { text: "Мне больше по душе логика и эксперименты", category: "I" },
      { text: "Если это помогает кому-то — да", category: "S" },
      { text: "Только если есть чёткий план и цель", category: "C" }
    ]
  },
  {
    question: "Любишь ли ты придумывать свои истории, персонажей, песни?",
    options: [
      { text: "Да, обожаю!", category: "A" },
      { text: "Только если они логически выстроены", category: "I" },
      { text: "Я бы хотел вдохновлять ими других", category: "E" },
      { text: "Я предпочитаю факты, а не вымысел", category: "C" }
    ]
  },
  {
    question: "Нравится ли тебе нестандартно решать задачи и придумывать оригинальные идеи?",
    options: [
      { text: "Да, именно так я и работаю", category: "A" },
      { text: "Иногда, если это помогает решить научную проблему", category: "I" },
      { text: "Только если идея приводит к лидерству", category: "E" },
      { text: "Мне комфортнее следовать проверенным схемам", category: "C" }
    ]
  },
  {
    question: "Интересно ли тебе изучать искусство, посещать выставки, концерты?",
    options: [
      { text: "Да, я черпаю оттуда вдохновение", category: "A" },
      { text: "Только если есть научный интерес", category: "I" },
      { text: "Если это совместная активность — да", category: "S" },
      { text: "Предпочитаю структурированные мероприятия", category: "C" }
    ]
  },
{
    question: "Любишь ли ты помогать людям, заботиться о друзьях и близких?",
    options: [
      { text: "Да, я всегда готов выслушать и поддержать", category: "S" },
      { text: "Только если могу сделать это через полезный проект", category: "E" },
      { text: "Мне проще помочь делом — починить или сделать что-то", category: "R" },
      { text: "Лучше помочь через полезную информацию или расчёт", category: "C" }
    ]
  },

  {
    question: "Нравится ли тебе объяснять друзьям домашнее задание или помогать младшим?",
    options: [
      { text: "Обожаю — приятно делиться знаниями", category: "S" },
      { text: "Только если могу подать это как презентацию или выступление", category: "E" },
      { text: "Я бы сделал вместо них, чем объяснял", category: "R" },
      { text: "Мне проще написать инструкцию, чем объяснять устно", category: "C" }
    ]
  },
  {
    question: "Тебе приятно работать в команде и достигать цели вместе с другими?",
    options: [
      { text: "Да, вместе проще и веселей", category: "S" },
      { text: "Только если я лидер или организатор", category: "E" },
      { text: "Предпочитаю работать самостоятельно, руками", category: "R" },
      { text: "Предпочитаю когда у всех чёткие роли и порядок", category: "C" }
    ]
  },
  {
    question: "Чувствуешь ли ты радость, когда кому-то становится легче после твоей помощи?",
    options: [
      { text: "Да, для этого я и стараюсь", category: "S" },
      { text: "Только если помощь принесла результат и признание", category: "E" },
      { text: "Мне важнее решить техническую проблему, чем эмоции", category: "I" },
      { text: "Я предпочитаю помогать структурно — например, через организацию", category: "C" }
    ]
  },
  {
    question: "Интересно ли тебе участвовать в волонтёрских проектах или мероприятиях, чтобы помогать другим?",
    options: [
      { text: "Да, я люблю быть полезным обществу", category: "S" },
      { text: "Только если могу руководить или что-то организовывать", category: "E" },
      { text: "Мне интереснее организовать склад или логистику для проекта", category: "C" },
      { text: "Я бы лучше починил или настроил что-нибудь для них", category: "R" }
    ]
  },
  {
    question: "Нравится ли тебе учить или наставлять других, помогать им освоить новый навык?",
    options: [
      { text: "Да, делиться знаниями — это моё", category: "S" },
      { text: "Только если могу это подать эффектно", category: "E" },
      { text: "Мне проще самому всё сделать", category: "R" },
      { text: "Я бы подготовил методичку, чтобы человек сам разобрался", category: "C" }
    ]
  },
  {
    question: "Любишь ли ты брать на себя инициативу и организовывать школьные проекты?",
    options: [
      { text: "Да, обожаю быть организатором и лидером", category: "E" },
      { text: "Только если это связано с пользой для других", category: "S" },
      { text: "Я лучше выполню техническую часть", category: "R" },
      { text: "Я могу взять на себя планирование и расписание", category: "C" }
    ]
  },
  {
    question: "Интересно ли тебе убеждать людей поверить в твою идею, участвуя в дебатах или презентациях?",
    options: [
      { text: "Да, люблю влиять и вдохновлять", category: "E" },
      { text: "Только если тема мне близка и полезна другим", category: "S" },
      { text: "Я бы лучше выступал с визуальной или креативной подачей", category: "A" },
      { text: "Я предпочитаю доказывать фактами, не словами", category: "I" }
    ]
  },
  {
    question: "Нравится ли тебе придумывать собственные проекты и вести их от начала до конца?",
    options: [
      { text: "Да, особенно если это мой личный бизнес", category: "E" },
      { text: "Только если проект креативный или арт-связанный", category: "A" },
      { text: "Я лучше подключусь на этапе реализации, руками", category: "R" },
      { text: "Мне интересен этап структурирования, бюджета, расписания", category: "C" }
    ]
  },
  {
    question: "Предпочитаешь ли ты быть лидером и планировать действия группы, а не просто выполнять инструкции?",
    options: [
      { text: "Да, люблю управлять и принимать решения", category: "E" },
      { text: "Иногда — если цель полезная для других", category: "S" },
      { text: "Я лучше работаю по заданию, но чётко", category: "R" },
      { text: "Мне важно, чтобы были инструкции — по ним я быстро сделаю", category: "C" }
    ]
  },
  {
    question: "Тебе нравится соревноваться и рисковать ради достижения цели?",
    options: [
      { text: "Да, азарт — это двигатель успеха", category: "E" },
      { text: "Только если есть конкретная польза и результат", category: "C" },
      { text: "Мне интереснее участвовать в соревнованиях знаний или логики", category: "I" },
      { text: "Я больше люблю командные соревнования ради взаимодействия", category: "S" }
    ]
  },
  {
    question: "Чувствуешь ли ты удовлетворение, когда твои идеи поддерживаются и люди следуют за тобой?",
    options: [
      { text: "Да, это и есть моя цель — вдохновлять", category: "E" },
      { text: "Только если идея действительно полезная", category: "S" },
      { text: "Мне важно, чтобы идея была логически верной", category: "I" },
      { text: "Я бы хотел, чтобы идея была оформлена чётко и по плану", category: "C" }
    ]
  },
  {
    question: "Нравится ли тебе порядок и систематизация, например, когда всё аккуратно разложено и подписано?",
    options: [
      { text: "Обожаю! Мне важно, чтобы всё лежало на своём месте", category: "C" },
      { text: "Только если это ускоряет работу", category: "R" },
      { text: "Я могу создать систему, но визуально, с эстетикой", category: "A" },
      { text: "Мне комфортнее в гибкой среде общения", category: "S" }
    ]
  },
  {
    question: "Любишь ли ты работать с цифрами и таблицами, например, вести бюджет или считать оценки?",
    options: [
      { text: "Да, я люблю точность и порядок", category: "C" },
      { text: "Только если это часть аналитики", category: "I" },
      { text: "Мне интереснее визуализировать информацию", category: "A" },
      { text: "Я предпочитаю живое взаимодействие, а не таблицы", category: "S" }
    ]
  },
  {
    question: "Тебя привлекает выполнять работу по чётким инструкциям и правилам, шаг за шагом?",
    options: [
      { text: "Да, так проще и надёжнее", category: "C" },
      { text: "Только если понимаю, зачем это нужно", category: "I" },
      { text: "Мне скучно без возможности импровизировать", category: "A" },
      { text: "Я бы лучше делал это в команде", category: "S" }
    ]
  },
  {
    question: "Получаешь ли ты удовольствие от аккуратной и точной работы с документами или расчётами?",
    options: [
      { text: "Да, мне это очень по душе", category: "C" },
      { text: "Если можно автоматизировать — интересно", category: "I" },
      { text: "Только если документ красиво оформлен", category: "A" },
      { text: "Мне больше нравится работать с людьми, чем с бумагами", category: "S" }
    ]
  },
  {
    question: "Тебя радует вести учёт или записывать информацию, чтобы ничего не забыть?",
    options: [
      { text: "Да, это даёт мне ощущение контроля", category: "C" },
      { text: "Только если это помогает другим", category: "S" },
      { text: "Я бы лучше создал приложение, чтобы всё фиксировалось", category: "I" },
      { text: "Я предпочитаю креативный хаос", category: "A" }
    ]
  },
  {
    question: "Предпочитаешь ли ты работать в организованной и структурированной среде, где всё заранее продумано?",
    options: [
      { text: "Да, мне так намного спокойнее", category: "C" },
      { text: "Только если это помогает работать с командой", category: "S" },
      { text: "Я могу работать в такой среде, но вносить новые идеи", category: "A" },
      { text: "Мне ближе свобода и постоянные изменения", category: "E" }
    ]
  }

];

let currentQuestionIndex = 0;
const answers = [];

const questionTitle = document.querySelector(".question_name h1");
const questionCounter = document.querySelector(".question_name p");
const form = document.getElementById("test-form");
const nextButton = document.getElementById("next-button");
const prevButton = document.getElementById("prev-button");

function renderQuestion(index) {
  const current = questions[index];
  questionTitle.textContent = `${index + 1}. ${current.question}`;
  questionCounter.textContent = `/ ${questions.length}`;
  form.innerHTML = "";

  current.options.forEach((option, i) => {
    const label = document.createElement("label");
    label.classList.add("option");
    label.textContent = option.text;

    const input = document.createElement("input");
    input.type = "radio";
    input.name = `question${index}`;
    input.value = option.category;

    // Если уже выбрал — отмечаем
    if (answers[index] === option.category) {
      input.checked = true;
      label.classList.add("selected");
      nextButton.disabled = false;
    }

    input.addEventListener("change", () => {
      answers[index] = input.value;
      const allOptions = form.querySelectorAll(".option");
      allOptions.forEach(opt => opt.classList.remove("selected"));
      label.classList.add("selected");
      nextButton.disabled = false;
    });

    label.prepend(input);
    form.appendChild(label);
  });

  prevButton.disabled = index === 0;
  nextButton.textContent = index === questions.length - 1 ? "Завершить" : "Далее";
  nextButton.disabled = !answers[index];
}

nextButton.addEventListener("click", () => {
  if (!answers[currentQuestionIndex]) return;

  currentQuestionIndex++;

  if (currentQuestionIndex >= questions.length) {
    showResults();
  } else {
    renderQuestion(currentQuestionIndex);
  }
});

prevButton.addEventListener("click", () => {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
    renderQuestion(currentQuestionIndex);
  }
});

function showResults() {
  // Подсчёт количества ответов по категориям
  const counts = {
    R: 0,
    I: 0,
    A: 0,
    S: 0,
    E: 0,
    C: 0,
  };

  answers.forEach(category => {
    if (counts[category] !== undefined) {
      counts[category]++;
    }
  });

  // Сортируем по убыванию количества
  const sorted = Object.entries(counts)
    .sort((a, b) => b[1] - a[1]) // Сортировка по количеству
    .map(([key]) => key); // Получаем только буквы типа

  const topTypes = sorted.slice(0, 3).join(""); // например "RIA"

  console.log("Тип личности по RIASEC:", topTypes);
  console.log("Полные ответы пользователя:", answers);

  // Сохраняем в localStorage
  localStorage.setItem("riasecAnswers", JSON.stringify(answers));
  localStorage.setItem("riasecTopTypes", topTypes);

  // Переход на страницу результатов
  window.location.href = "result.html";
}


// Инициализация
renderQuestion(currentQuestionIndex);

